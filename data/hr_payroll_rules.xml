<?xml version="1.0" encoding="utf-8" ?>
<odoo>


     <!-- ====== Odsustva - tipovi ===== -->

    <record id="holiday_status_drz_pra" model="hr.leave.type">
        <field name="name">Državni praznik</field>
        <field name="requires_allocation">no</field>
        <field name="employee_requests">no</field>
        <field name="color_name">lightyellow</field>
        <field name="responsible_id" ref="base.user_admin"/>
    </record>

    <record id="holiday_status_vje_pra" model="hr.leave.type">
        <field name="name">Vjerski praznik</field>
        <field name="requires_allocation">no</field>
        <field name="employee_requests">no</field>
        <field name="color_name">lightgreen</field>
        <field name="responsible_id" ref="base.user_admin"/>
    </record>

    <record id="leave_cekanje" model="hr.leave.type">
        <field name="name">Čekanje</field>
        <field name="requires_allocation">no</field>
        <!--
            <field name="leave_validation_type">both</field>
            <field name="allocation_validation_type">officer</field>
        -->
        <field name="request_unit">hour</field>
        <field name="unpaid" eval="False"/>
        <field name="color">5</field>
    </record>

    <record id="leave_rod_ods" model="hr.leave.type">
        <field name="name">Roditeljsko odsustvo</field>
        <field name="requires_allocation">no</field>
        <field name="request_unit">hour</field>
        <field name="unpaid" eval="True"/>
        <field name="color">6</field>
    </record>

    <!-- ========== Kategorije =============== -->
    <record id="D_IZ_SUB" model="hr.salary.rule.category">
        <field name="name">Doprinosi IZ plate - analitika</field>
        <field name="code">D_IZ_SUB</field>
    </record>

    <record id="D_IZ" model="hr.salary.rule.category">
        <field name="name">Doprinosi IZ - na teret poslodavca</field>
        <field name="code">D_IZ</field>
    </record>


    <record id="D_NA_SUB" model="hr.salary.rule.category">
        <field name="name">Doprinosi NA platu - analitika</field>
        <field name="code">D_NA_SUB</field>
    </record>
    <record id="D_NA" model="hr.salary.rule.category">
        <field name="name">Doprinosi NA - na teret zaposlenog</field>
        <field name="code">D_NA</field>
    </record>

    <record id="D_PIO" model="hr.salary.rule.category">
        <field name="name">Doprinos PIO (iz+na)</field>
        <field name="code">D_PIO</field>
    </record>

    <record id="D_ZDR" model="hr.salary.rule.category">
        <field name="name">Doprinos za zdravstvo (iz+na)</field>
        <field name="code">D_ZDR</field>
    </record>

    <record id="D_ZAP" model="hr.salary.rule.category">
        <field name="name">Doprinos za zapošljavanje (iz+na)</field>
        <field name="code">D_ZAP</field>
    </record>

    <record id="D_ZDR_F" model="hr.salary.rule.category">
        <field name="name">Doprinos za zdravstvo FBiH (iz+na)</field>
        <field name="code">D_ZDR_F</field>
    </record>

    <record id="D_ZDR_K" model="hr.salary.rule.category">
        <field name="name">Doprinos za zdravstvo kantoni (iz+na)</field>
        <field name="code">D_ZDR_K</field>
    </record>

    <record id="D_ZAP_F" model="hr.salary.rule.category">
        <field name="name">Doprinos za zapošljavanje FBiH (iz+na)</field>
        <field name="code">D_ZAP_F</field>
    </record>

    <record id="D_ZAP_K" model="hr.salary.rule.category">
        <field name="name">Doprinos za zapošljavanje kantoni (iz+na)</field>
        <field name="code">D_ZAP_K</field>
    </record>

    <record id="POREZ" model="hr.salary.rule.category">
        <field name="name">Porez na platu</field>
        <field name="code">POREZ</field>
    </record>

    <record id="LIC_ODB" model="hr.salary.rule.category">
        <field name="name">Lični odbitak</field>
        <field name="code">LIC_ODB</field>
    </record>

    <record id="NETO_SUB" model="hr.salary.rule.category">
        <field name="name">Neto primanja - analitika</field>
        <field name="code">NETO_SUB</field>
    </record>

    <record id="NETO" model="hr.salary.rule.category">
        <field name="name">Neto primanja</field>
        <field name="code">NETO</field>
    </record>

    <record id="NETO_POS" model="hr.salary.rule.category">
        <field name="name">Neto plata poslije poreza</field>
        <field name="code">NETO_POS</field>
    </record>

    <record id="BRUTO_SUB" model="hr.salary.rule.category">
        <field name="name">Bruto primanja - analitika</field>
        <field name="code">BRUTO_SUB</field>
    </record>

    <record id="BR_OSN" model="hr.salary.rule.category">
        <field name="name">Bruto osnovica</field>
        <field name="code">BR_OSN</field>
    </record>

    <record id="BRUTO" model="hr.salary.rule.category">
        <field name="name">Bruto primanja</field>
        <field name="code">BRUTO</field>
    </record>

    <record id="NAKN" model="hr.salary.rule.category">
        <field name="name">Naknade</field>
        <field name="code">NAKN</field>
    </record>

    <record id="OBUST" model="hr.salary.rule.category">
        <field name="name">Obustave</field>
        <field name="code">OBUST</field>
    </record>

    <record id="UKUPNO" model="hr.salary.rule.category">
        <field name="name">Ukupno</field>
        <field name="code">UKUPNO</field>
    </record>


    <!-- ============ cntribution registers =========== -->

    <record id="contrib_register_isp" model="hr.contribution.register">
        <field name="name">Isplata</field>
        <field name="partner_id" eval="False" />
    </record>

    <record id="contrib_register_pio" model="hr.contribution.register">
        <field name="name">Doprinos PIO FBiH</field>
        <field name="partner_id" eval="False" />
    </record>

    <record id="contrib_register_zdr_f" model="hr.contribution.register">
        <field name="name">Doprinos zdravstvo FBiH</field>
        <field name="partner_id" eval="False" />
    </record>

    <record id="contrib_register_zdr_k1" model="hr.contribution.register">
        <field name="name">Doprinos zdravstvo KZE-DO</field>
        <field name="partner_id" eval="False" />
    </record>

    <record id="contrib_register_zdr_k2" model="hr.contribution.register">
        <field name="name">Doprinos zdravstvo KSA</field>
        <field name="partner_id" eval="False" />
    </record>

    <record id="contrib_register_zap_f" model="hr.contribution.register">
        <field name="name">Doprinos zapošljavanje FBiH</field>
        <field name="partner_id" eval="False" />
    </record>

    <record id="contrib_register_zap_k1" model="hr.contribution.register">
        <field name="name">Doprinos zapošljavanje KZE-DO</field>
        <field name="partner_id" eval="False" />
    </record>

    <record id="contrib_register_zap_k2" model="hr.contribution.register">
        <field name="name">Doprinos zapošljavanje KSA</field>
        <field name="partner_id" eval="False" />
    </record>

    <!-- ============ PARAMETRI plate =========== -->

    <!-- Koeficijent bruto osnove FBiH -->
    <record id="rule_param_koef_zaok" model="hr.rule.parameter">
        <field name="name">Zaokruženje</field>
        <field name="code">ZAOK</field>
        <field name="country_id" ref="base.ba"/>
    </record>
    <record id="rule_param_koef_zaok_2020" model="hr.rule.parameter.value">
        <field name="parameter_value">2</field>
        <field name="rule_parameter_id" ref="rule_param_koef_zaok"/>
        <field name="date_from" eval="datetime(2020, 1, 1).date()"/>
    </record>

    <!-- Koeficijent bruto osnove FBiH -->
    <record id="rule_param_koef_bo" model="hr.rule.parameter">
        <field name="name">Koef Bruto osnove</field>
        <field name="code">KOEF_BO</field>
        <field name="country_id" ref="base.ba"/>
    </record>
    <record id="rule_param_koef_bo_2020" model="hr.rule.parameter.value">
        <field name="parameter_value">144.9275</field>
        <field name="rule_parameter_id" ref="rule_param_koef_bo"/>
        <field name="date_from" eval="datetime(2020, 1, 1).date()"/>
    </record>

    <!-- minimalna neto plata FBiH 01.01.2022 -->
    <record id="rule_param_min_neto" model="hr.rule.parameter">
        <field name="name">Minimalna neto plata FBiH</field>
        <field name="code">MIN_NETO_FBIH</field>
        <field name="country_id" ref="base.ba"/>
    </record>
    <record id="rule_param_min_neto_2022" model="hr.rule.parameter.value">
        <field name="parameter_value">543.00</field>
        <field name="rule_parameter_id" ref="rule_param_min_neto"/>
        <field name="date_from" eval="datetime(2022, 1, 1).date()"/>
    </record>

    <!-- minimalna neto satnica opšti kolektivni ugovor FBiH 01.01.2022 -->
    <record id="rule_param_min_neto_sat" model="hr.rule.parameter">
        <field name="name">Minimalna neto satnica FBiH</field>
        <field name="code">MNS_FBIH</field>
        <field name="country_id" ref="base.ba"/>
    </record>
    <record id="rule_param_min_neto_sat_2022" model="hr.rule.parameter.value">
        <field name="parameter_value">2.31</field>
        <field name="rule_parameter_id" ref="rule_param_min_neto_sat"/>
        <field name="date_from" eval="datetime(2022, 1, 1).date()"/>
    </record>

    <!-- minimalna neto satnica granski ugovor metalaca FBiH 01.01.2022 -->
    <record id="rule_param_min_neto_sat_met" model="hr.rule.parameter">
        <field name="name">Min neto satnica granski ugovor metalci FBiH</field>
        <field name="code">MNS_MET_FBIH</field>
        <field name="country_id" ref="base.ba"/>
    </record>
    <record id="rule_param_min_neto_sat_met_2022" model="hr.rule.parameter.value">
        <field name="parameter_value">3.5</field>
        <field name="rule_parameter_id" ref="rule_param_min_neto_sat_met"/>
        <field name="date_from" eval="datetime(2022, 1, 1).date()"/>
    </record>

    <!-- Prosječna neto plata FBiH 2022/07 -->
    <record id="rule_param_prosj_neto_pl" model="hr.rule.parameter">
        <field name="name">Prosječna neto plata FBiH</field>
        <field name="code">PROS_N_P_FBIH</field>
        <field name="country_id" ref="base.ba"/>
    </record>
    <record id="rule_param_koef_bo_2022_07" model="hr.rule.parameter.value">
        <field name="parameter_value">1110.00</field>
        <field name="rule_parameter_id" ref="rule_param_prosj_neto_pl"/>
        <field name="date_from" eval="datetime(2022, 7, 1).date()"/>
    </record>

    <!-- Vrijednost boda 2022/07 -->
    <record id="rule_param_vrbod" model="hr.rule.parameter">
        <field name="name">Vrijednost boda</field>
        <field name="code">VRBOD</field>
        <field name="country_id" ref="base.ba"/>
    </record>
    <record id="rule_param_vrbod_2022_07" model="hr.rule.parameter.value">
        <field name="parameter_value">2.31</field>
        <field name="rule_parameter_id" ref="rule_param_vrbod"/>
        <field name="date_from" eval="datetime(2022, 7, 1).date()"/>
    </record>

    <record id="rule_param_to_dan" model="hr.rule.parameter">
        <field name="name">Topli obrok ukupno/danu</field>
        <field name="code">TO_DAN</field>
        <field name="country_id" ref="base.ba"/>
    </record>
    <record id="rule_param_to_dan_2022_01" model="hr.rule.parameter.value">
        <field name="parameter_value">13.00</field>
        <field name="rule_parameter_id" ref="rule_param_to_dan"/>
        <field name="date_from" eval="datetime(2022, 1, 1).date()"/>
    </record>

    <!-- PARAMS Doprinosi IZ ... -->
    <record id="rule_parameter_dopr_iz_pio" model="hr.rule.parameter">
        <field name="name">Dopr.IZ PIO</field>
        <field name="code">D_IZ_PIO</field>
        <!-- Bosnia and Herzegovina -->
        <field name="country_id" ref="base.ba"/>
    </record>
    <record id="rule_parameter_dopr_iz_pio_2020" model="hr.rule.parameter.value">
        <field name="parameter_value">17</field>
        <field name="rule_parameter_id" ref="rule_parameter_dopr_iz_pio"/>
        <field name="date_from" eval="datetime(2020, 1, 1).date()"/>
    </record>

    <record id="rule_parameter_dopr_iz_zdr" model="hr.rule.parameter">
        <field name="name">Dopr.IZ ZDR</field>
        <field name="code">D_IZ_ZDR</field>
        <field name="country_id" ref="base.ba"/>
    </record>
    <record id="rule_parameter_dopr_iz_zdr_2020" model="hr.rule.parameter.value">
        <field name="parameter_value">12.5</field>
        <field name="rule_parameter_id" ref="rule_parameter_dopr_iz_zdr"/>
        <field name="date_from" eval="datetime(2020, 1, 1).date()"/>
    </record>

    <record id="rule_parameter_dopr_iz_zap" model="hr.rule.parameter">
        <field name="name">Dopr.IZ zapošljavanje</field>
        <field name="code">D_IZ_ZAP</field>
        <field name="country_id" ref="base.ba"/>
    </record>
    <record id="rule_parameter_dopr_iz_zap_2020" model="hr.rule.parameter.value">
        <field name="parameter_value">1.5</field>
        <field name="rule_parameter_id" ref="rule_parameter_dopr_iz_zap"/>
        <field name="date_from" eval="datetime(2020, 1, 1).date()"/>
    </record>

    <!-- PARAMS Doprinosi NA ... -->
    <record id="rule_parameter_dopr_na_pio" model="hr.rule.parameter">
        <field name="name">Dopr.NA PIO</field>
        <field name="code">D_NA_PIO</field>
        <!-- Bosnia and Herzegovina -->
        <field name="country_id" ref="base.ba"/>
    </record>
    <record id="rule_parameter_dopr_na_pio_2020" model="hr.rule.parameter.value">
        <field name="parameter_value">6.0</field>
        <field name="rule_parameter_id" ref="rule_parameter_dopr_na_pio"/>
        <field name="date_from" eval="datetime(2020, 1, 1).date()"/>
    </record>

    <record id="rule_parameter_dopr_na_zdr" model="hr.rule.parameter">
        <field name="name">Dopr.NA ZDR</field>
        <field name="code">D_NA_ZDR</field>
        <field name="country_id" ref="base.ba"/>
    </record>
    <record id="rule_parameter_dopr_na_zdr_2020" model="hr.rule.parameter.value">
        <field name="parameter_value">4.0</field>
        <field name="rule_parameter_id" ref="rule_parameter_dopr_na_zdr"/>
        <field name="date_from" eval="datetime(2020, 1, 1).date()"/>
    </record>

    <record id="rule_parameter_dopr_na_zap" model="hr.rule.parameter">
        <field name="name">Dopr.NA zapošljavanje</field>
        <field name="code">D_NA_ZAP</field>
        <field name="country_id" ref="base.ba"/>
    </record>
    <record id="rule_parameter_dopr_na_zap_2020" model="hr.rule.parameter.value">
        <field name="parameter_value">0.5</field>
        <field name="rule_parameter_id" ref="rule_parameter_dopr_na_zap"/>
        <field name="date_from" eval="datetime(2020, 1, 1).date()"/>
    </record>


    <record id="rule_parameter_porez" model="hr.rule.parameter">
        <field name="name">Porez na platu</field>
        <field name="code">POREZ</field>
        <field name="country_id" ref="base.ba"/>
    </record>
    <record id="rule_parameter_porez_2020" model="hr.rule.parameter.value">
        <field name="parameter_value">10.0</field>
        <field name="rule_parameter_id" ref="rule_parameter_porez"/>
        <field name="date_from" eval="datetime(2020, 1, 1).date()"/>
    </record>


    <!-- Detaširani radnici bruto osnova -->
    <record id="rule_param_br_osn_dnj" model="hr.rule.parameter">
        <field name="name">Bruto osnova detaširani radnici Njemačka</field>
        <field name="code">BR_OSN_DNJ</field>
        <field name="country_id" ref="base.ba"/>
    </record>
    <record id="rule_param_koef_zaok_2022" model="hr.rule.parameter.value">
        <field name="parameter_value">1529.00</field>
        <field name="rule_parameter_id" ref="rule_param_br_osn_dnj"/>
        <field name="date_from" eval="datetime(2022, 1, 1).date()"/>
    </record>

    <!-- =================== PRAVILA ======================= -->

    <record id="hr_salary_rule_rr" model="hr.salary.rule">
        <field name="name">Redovan rad</field>
        <field name="sequence" eval="10" />
        <field name="code">REDRAD</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.NETO_SUB" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
odsustva = worked_days.CEKANJE and -worked_days.CEKANJE.number_of_hours
odsustva += worked_days.ODMOR and -worked_days.ODMOR.number_of_hours
radni_dani = worked_days.WORK100 and worked_days.WORK100.number_of_hours
result_qty = radni_dani - odsustva
result = contract.br_bod * float(payslip.rule_parameter('VRBOD'))
        </field>
    </record>

    <record id="hr_salary_rule_prerasp" model="hr.salary.rule">
        <field name="name">Preraspodjele</field>
        <field name="sequence" eval="12" />
        <field name="code">PRERASP</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.NETO_SUB" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
kompenz_dani = worked_days.CEKANJE and -worked_days.CEKANJE.number_of_hours
result_qty = kompenz_dani
result = contract.br_bod * float(payslip.rule_parameter('VRBOD'))
        </field>
    </record>

    <record id="hr_salary_rule_mr" model="hr.salary.rule">
        <field name="name">Minuli rad</field>
        <field name="sequence" eval="11" />
        <field name="code">MINRAD</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.NETO_SUB" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty = 1
result_rate = contract.koef_mr
result = round(result_rules.REDRAD.amount,2) * round(result_rules.REDRAD.quantity,2)
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_ceka" model="hr.salary.rule">
        <field name="name">Čekanje</field>
        <field name="sequence" eval="13" />
        <field name="code">CEKANJE</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.NETO_SUB" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty =  -worked_days.CEKANJE and worked_days.CEKANJE.number_of_hours
min_met = result_qty * float(payslip.rule_parameter('MNS_MET_FBIH'))
#min = result_qty * float(payslip.rule_parameter('MNS_FBIH'))
result = min_met
        </field>
    </record>

    <record id="hr_salary_rule_kor_min" model="hr.salary.rule">
        <field name="name">Korekcija - minimum po opštem kolektivnom ugovoru</field>
        <field name="sequence" eval="13" />
        <field name="code">KOREK</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.NETO_SUB" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
odsustva = worked_days.CEKANJE and -worked_days.CEKANJE.number_of_hours
odsustva += worked_days.ODMOR and -worked_days.ODMOR.number_of_hours
radni_dani = worked_days.WORK100 and worked_days.WORK100.number_of_hours
result_qty = radni_dani - odsustva
neto = result_qty * (1 + contract.koef_mr / 100.00) * contract.br_bod * float(payslip.rule_parameter('VRBOD'))
min = result_qty * float(payslip.rule_parameter('MNS_FBIH'))
result = 0
if min > neto:
    result = (min - neto) / result_qty
if result == 0:
    result_qty = 0
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>


    <record id="hr_salary_rule_kor_min_met" model="hr.salary.rule">
        <field name="name">Korekcija - minimum po kolektivnom ugovoru METAL</field>
        <field name="sequence" eval="14" />
        <field name="code">KOREK_MET</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.NETO_SUB" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty =  worked_days.WORK100 and worked_days.WORK100.number_of_hours
neto = result_qty * (1 + contract.koef_mr / 100.00) * contract.br_bod * float(payslip.rule_parameter('VRBOD'))
min_met = result_qty * float(payslip.rule_parameter('MNS_MET_FBIH'))
result = 0
if min_met > neto:
   result = (min_met - neto) / result_qty
if result == 0:
   result_qty = 0
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_nr" model="hr.salary.rule">
        <field name="name">Noćni rad</field>
        <field name="sequence" eval="15" />
        <field name="code">NOCNI</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.NETO_SUB" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty = 0
result = 0
        </field>
    </record>


    <record id="hr_salary_rule_dpraz" model="hr.salary.rule">
        <field name="name">Državni praznik</field>
        <field name="sequence" eval="16" />
        <field name="code">DPRAZ</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.NETO_SUB" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result = 0
        </field>
    </record>

    <record id="hr_salary_rule_r_dpraz" model="hr.salary.rule">
        <field name="name">Rad na državni praznik</field>
        <field name="sequence" eval="17" />
        <field name="code">R_DPRAZ</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.NETO_SUB" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty = 0
result = 0
        </field>
    </record>


    <record id="hr_salary_rule_ter" model="hr.salary.rule">
        <field name="name">Terenski rad</field>
        <field name="sequence" eval="18" />
        <field name="code">TEREN</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.NETO_SUB" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty = 0
result = 0
        </field>
    </record>

    <record id="hr_salary_rule_to" model="hr.salary.rule">
        <field name="name">Topli obrok (neoporeziva naknada)</field>
        <field name="sequence" eval="19" />
        <field name="code">TO</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.NAKN" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty =  worked_days.WORK100 and worked_days.WORK100.number_of_days
# dnevno 1% prosjecne plate FBiH
result = float(payslip.rule_parameter('PROS_N_P_FBIH')) * 1 / 100.00
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_to_o" model="hr.salary.rule">
        <field name="name">Topli obrok (oporezivi dio)</field>
        <field name="sequence" eval="20" />
        <field name="code">TO_O</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.NETO_SUB" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty =  worked_days.WORK100 and worked_days.WORK100.number_of_days
to_neopor = float(payslip.rule_parameter('PROS_N_P_FBIH')) * 1 / 100.00
result = float(payslip.rule_parameter('TO_DAN')) - to_neopor
if result &lt;= 0:
    result_qty = 0
    result = 0
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_godis" model="hr.salary.rule">
        <field name="name">Godišnji odmor</field>
        <field name="sequence" eval="21" />
        <field name="code">GODIS</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.NETO_SUB" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty = 0
result = 0
        </field>
    </record>

    <record id="hr_salary_rule_bolov" model="hr.salary.rule">
        <field name="name">Bolovanje do 42d</field>
        <field name="sequence" eval="22" />
        <field name="code">BOLOV</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.NETO_SUB" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty = 0
result = 0
        </field>
    </record>

    <record id="hr_salary_rule_roditelj" model="hr.salary.rule">
        <field name="name">Roditeljsko odsustvo</field>
        <field name="sequence" eval="23" />
        <field name="code">ROD_ODS</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.NETO_SUB" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty = 0
result = 0
        </field>
    </record>

    <record id="hr_salary_rule_neto" model="hr.salary.rule">
        <field name="name">Neto plata prije poreza</field>
        <field name="sequence" eval="50" />
        <field name="code">NETO</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.NETO" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty = 1
# quantity, rate, amount, total
result = ( round(result_rules.REDRAD.amount,2) * round(result_rules.REDRAD.quantity,2) * round(result_rules.REDRAD.rate,2)/100 +
           round(result_rules.MINRAD.amount,2) * round(result_rules.MINRAD.quantity,2) * round(result_rules.MINRAD.rate,2)/100 +
           round(result_rules.NOCNI.amount,2) * round(result_rules.NOCNI.quantity,2) * round(result_rules.NOCNI.rate,2)/100 +
           round(result_rules.PRERASP.amount,2) * round(result_rules.PRERASP.quantity,2) * round(result_rules.PRERASP.rate,2)/100 +
           round(result_rules.CEKANJE.amount,2) * round(result_rules.CEKANJE.quantity,2) * round(result_rules.CEKANJE.rate,2)/100 +
           round(result_rules.TEREN.amount,2) * round(result_rules.TEREN.quantity,2) * round(result_rules.TEREN.rate,2)/100 +
           round(result_rules.GODIS.amount,2) * round(result_rules.GODIS.quantity,2) * round(result_rules.GODIS.rate,2)/100 +
           round(result_rules.BOLOV.amount,2) * round(result_rules.BOLOV.quantity,2) * round(result_rules.BOLOV.rate,2)/100 if result_rules.BOLOV else 0 +
           round(result_rules.DPRAZ.amount,2) * round(result_rules.DPRAZ.quantity,2) * round(result_rules.DPRAZ.rate,2)/100 +
           round(result_rules.R_DPRAZ.amount,2) * round(result_rules.R_DPRAZ.quantity,2) * round(result_rules.R_DPRAZ.rate,2)/100 +
           round(result_rules.TO_O.amount,2) * round(result_rules.TO_O.quantity,2) * round(result_rules.TO_O.rate,2)/100 +
           round(result_rules.KOREK_MET.amount,2) * round(result_rules.KOREK_MET.quantity,2) * round(result_rules.KOREK_MET.rate,2)/100 if result_rules.KOREK_MET else 0 +
           round(result_rules.KOREK.amount,2) * round(result_rules.KOREK.quantity,2) * round(result_rules.KOREK.rate,2)/100 if result_rules.KOREK else 0
         )
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_bruto_osn" model="hr.salary.rule">
        <field name="name">Bruto osnovica</field>
        <field name="sequence" eval="60" />
        <field name="code">BR_OSN</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.BR_OSN" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('KOEF_BO'))
result = round(result_rules.NETO.amount,2) * round(result_rules.NETO.quantity,2) * round(result_rules.NETO.rate,2)/100
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_obust" model="hr.salary.rule">
        <field name="name">Obustava 1</field>
        <field name="sequence" eval="100" />
        <field name="code">OB_1</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.OBUST" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result = 0
        </field>
    </record>


    <!-- Doprinosi IZ rules ... -->
    <record id="hr_salary_rule_dopr_iz" model="hr.salary.rule">
        <field name="name">Doprinosi IZ plate</field>
        <field name="sequence" eval="250" />
        <field name="code">D_IZ</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.D_IZ" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_IZ_PIO')) + float(payslip.rule_parameter('D_IZ_ZDR')) + float(payslip.rule_parameter('D_IZ_ZAP'))
result = categories.BR_OSN
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_dopr_iz_pio" model="hr.salary.rule">
        <field name="name">Doprinos IZ PIO</field>
        <field name="sequence" eval="251" />
        <field name="code">D_IZ_PIO</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.D_IZ_SUB" />
        <field name="appears_on_payslip" eval="False" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_iz" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_IZ_PIO'))
result = categories.BR_OSN
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_dopr_iz_zdr" model="hr.salary.rule">
        <field name="name">Doprinos IZ ZDRAVSTVO</field>
        <field name="sequence" eval="252" />
        <field name="code">D_IZ_ZDR</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.D_IZ_SUB" />
        <field name="appears_on_payslip" eval="False" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_iz" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_IZ_ZDR'))
result = categories.BR_OSN
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_dopr_iz_zap" model="hr.salary.rule">
        <field name="name">Doprinos IZ Nezaposleni</field>
        <field name="sequence" eval="253" />
        <field name="code">D_IZ_ZAP</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.D_IZ_SUB" />
        <field name="appears_on_payslip" eval="False" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_iz" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_IZ_ZAP'))
result = categories.BR_OSN
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <!-- ====================== Doprinosi NA============== -->
    <record id="hr_salary_rule_dopr_na" model="hr.salary.rule">
        <field name="name">Doprinosi NA plate</field>
        <field name="sequence" eval="260" />
        <field name="code">D_NA</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.D_NA" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_NA_PIO')) + float(payslip.rule_parameter('D_NA_ZDR')) + float(payslip.rule_parameter('D_NA_ZAP'))
result = categories.BR_OSN
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_dopr_na_pio" model="hr.salary.rule">
        <field name="name">Doprinos NA PIO</field>
        <field name="sequence" eval="261" />
        <field name="code">D_NA_PIO</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.D_NA_SUB" />
        <field name="appears_on_payslip" eval="False" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_na" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_NA_PIO'))
result = categories.BR_OSN
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_dopr_na_zdr" model="hr.salary.rule">
        <field name="name">Doprinos NA zdravstvo</field>
        <field name="sequence" eval="262" />
        <field name="code">D_NA_ZDR</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.D_NA_SUB" />
        <field name="appears_on_payslip" eval="False" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_na" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_NA_ZDR'))
result = categories.BR_OSN
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_dopr_na_zap" model="hr.salary.rule">
        <field name="name">Doprinos NA zapošljavanje</field>
        <field name="sequence" eval="263" />
        <field name="code">D_NA_ZAP</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.D_NA_SUB" />
        <field name="appears_on_payslip" eval="False" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_na" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_NA_ZAP'))
result = categories.BR_OSN
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>


   <!-- Doprinosi PIO rules ... -->
   <record id="hr_salary_rule_dopr_pio" model="hr.salary.rule">
        <field name="name">Doprinosi PIO</field>
        <field name="sequence" eval="270" />
        <field name="code">D_PIO</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_PIO" />
        <field name="register_id" ref="contrib_register_pio" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_IZ_PIO')) + float(payslip.rule_parameter('D_NA_PIO'))
result = categories.BR_OSN
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <!-- Doprinosi Zdravstvo rules ... -->
   <record id="hr_salary_rule_dopr_zdr" model="hr.salary.rule">
        <field name="name">Doprinosi zdravstvo</field>
        <field name="sequence" eval="271" />
        <field name="code">D_ZDR</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_ZDR" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_IZ_ZDR')) + float(payslip.rule_parameter('D_NA_ZDR'))
result = categories.BR_OSN
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_dopr_zdr_f" model="hr.salary.rule">
        <field name="name">Doprinosi zdravstvo FBiH 10.2%</field>
        <field name="sequence" eval="272" />
        <field name="code">D_ZDR_F</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_ZDR_F" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_zdr" />
        <field name="register_id" ref="contrib_register_zdr_f" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_IZ_ZDR')) + float(payslip.rule_parameter('D_NA_ZDR'))
result = categories.BR_OSN * 10.2/100.00
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_dopr_zdr_k1" model="hr.salary.rule">
        <field name="name">Doprinosi zdravstvo KZE-DO 89.8%</field>
        <field name="sequence" eval="273" />
        <field name="code">D_ZDR_K1</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_ZDR_K" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_zdr" />
        <field name="register_id" ref="contrib_register_zdr_k1" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty = 0
if employee.address_id.city.lower() == 'zenica':
    result_qty = 1
result_rate = float(payslip.rule_parameter('D_IZ_ZDR')) + float(payslip.rule_parameter('D_NA_ZDR'))
result = categories.BR_OSN * 89.8/100.00
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_dopr_zdr_k2" model="hr.salary.rule">
        <field name="name">Doprinosi zdravstvo KSA 89.8%</field>
        <field name="sequence" eval="274" />
        <field name="code">D_ZDR_K2</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_ZDR_K" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_zdr" />
        <field name="register_id" ref="contrib_register_zdr_k2" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty = 0
if employee.address_id.city.lower() == 'sarajevo':
    result_qty = 1
result_rate = float(payslip.rule_parameter('D_IZ_ZDR')) + float(payslip.rule_parameter('D_NA_ZDR'))
result = categories.BR_OSN * 89.8/100.00
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <!-- Doprinosi Zapošljavanje rules ... -->
    <record id="hr_salary_rule_dopr_zap" model="hr.salary.rule">
        <field name="name">Doprinosi zapošljavanje</field>
        <field name="sequence" eval="275" />
        <field name="code">D_ZAP</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_ZAP" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_IZ_ZAP')) + float(payslip.rule_parameter('D_NA_ZAP'))
result = categories.BR_OSN
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_dopr_zap_f" model="hr.salary.rule">
        <field name="name">Doprinosi zapošljavanje 30% FBiH</field>
        <field name="sequence" eval="276" />
        <field name="code">D_ZAP_F</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_ZAP_F" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_zap" />
        <field name="register_id" ref="contrib_register_zap_f" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_IZ_ZAP')) + float(payslip.rule_parameter('D_NA_ZAP'))
result = categories.BR_OSN * 30/100.00
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_dopr_zap_k1" model="hr.salary.rule">
        <field name="name">Doprinosi zapošljavanje 70% KZE-DO</field>
        <field name="sequence" eval="277" />
        <field name="code">D_ZAP_K1</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_ZAP_K" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_zap" />
        <field name="register_id" ref="contrib_register_zap_k1" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty = 0
if employee.address_id.city.lower() == 'zenica':
    result_qty = 1
result_rate = float(payslip.rule_parameter('D_IZ_ZAP')) + float(payslip.rule_parameter('D_NA_ZAP'))
result = categories.BR_OSN * 70/100.00
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_dopr_zap_k2" model="hr.salary.rule">
        <field name="name">Doprinosi zapošljavanje 70% KSA</field>
        <field name="sequence" eval="278" />
        <field name="code">D_ZAP_K2</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_ZAP_K" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_zap" />
        <field name="register_id" ref="contrib_register_zap_k2" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty = 0
if employee.address_id.city.lower() == 'sarajevo':
    result_qty = 1
result_rate = float(payslip.rule_parameter('D_IZ_ZAP')) + float(payslip.rule_parameter('D_NA_ZAP'))
result = categories.BR_OSN * 70/100.00
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>


    <!-- ====== Detaširani - obračun doprinosa ============ -->

    <!-- Doprinosi PIO rules ... -->
   <record id="hr_salary_rule_dopr_pio_dnj" model="hr.salary.rule">
        <field name="name">Doprinosi PIO detašm Nj</field>
        <field name="sequence" eval="400" />
        <field name="code">D_PIO_DNJ</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_PIO" />
        <field name="register_id" ref="contrib_register_pio" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_IZ_PIO')) + float(payslip.rule_parameter('D_NA_PIO'))
result = float(payslip.rule_parameter('BR_OSN_DNJ'))
        </field>
    </record>

    <!-- Doprinosi Zdravstvo rules ... -->
    <record id="hr_salary_rule_dopr_zdr_dnj" model="hr.salary.rule">
        <field name="name">Doprinosi zdravstvo detašm Nj</field>
        <field name="sequence" eval="401" />
        <field name="code">D_ZDR_DNJ</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_ZDR" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_IZ_ZDR')) + float(payslip.rule_parameter('D_NA_ZDR'))
result = float(payslip.rule_parameter('BR_OSN_DNJ'))
        </field>
    </record>

    <record id="hr_salary_rule_dopr_zdr_f_dnj" model="hr.salary.rule">
        <field name="name">Doprinosi zdravstvo FBiH 10.2% detašm Nj</field>
        <field name="sequence" eval="402" />
        <field name="code">D_ZDR_F_DNJ</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_ZDR_F" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_zdr_dnj" />
        <field name="register_id" ref="contrib_register_zdr_f" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_IZ_ZDR')) + float(payslip.rule_parameter('D_NA_ZDR'))
result = categories.BR_OSN * 10.2/100.00
result = float(payslip.rule_parameter('BR_OSN_DNJ'))
        </field>
    </record>

    <record id="hr_salary_rule_dopr_zdr_k1" model="hr.salary.rule">
        <field name="name">Doprinosi zdravstvo KZE-DO 89.8% detašm Nj</field>
        <field name="sequence" eval="403" />
        <field name="code">D_ZDR_K1_DNJ</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_ZDR_K" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_zdr_dnj" />
        <field name="register_id" ref="contrib_register_zdr_k1" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty = 0
if employee.address_id.city.lower() == 'zenica':
    result_qty = 1
result_rate = float(payslip.rule_parameter('D_IZ_ZDR')) + float(payslip.rule_parameter('D_NA_ZDR'))
result = float(payslip.rule_parameter('BR_OSN_DNJ')) * 89.8/100.00
        </field>
    </record>

    <record id="hr_salary_rule_dopr_zdr_k2" model="hr.salary.rule">
        <field name="name">Doprinosi zdravstvo KSA 89.8% detašm Nj</field>
        <field name="sequence" eval="404" />
        <field name="code">D_ZDR_K2_DNJ</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_ZDR_K" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_zdr_dnj" />
        <field name="register_id" ref="contrib_register_zdr_k2" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty = 0
if employee.address_id.city.lower() == 'zenica':
    result_qty = 1
result_rate = float(payslip.rule_parameter('D_IZ_ZDR')) + float(payslip.rule_parameter('D_NA_ZDR'))
result = float(payslip.rule_parameter('BR_OSN_DNJ')) * 89.8/100.00
        </field>
    </record>

    <!-- Doprinosi Zapošljavanje rules ... -->
    <record id="hr_salary_rule_dopr_zap_dnj" model="hr.salary.rule">
        <field name="name">Doprinosi zapošljavanje detašm Nnj</field>
        <field name="sequence" eval="405" />
        <field name="code">D_ZAP_DNJ</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_ZAP" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_IZ_ZAP')) + float(payslip.rule_parameter('D_NA_ZAP'))
result = float(payslip.rule_parameter('BR_OSN_DNJ'))
        </field>
    </record>

    <record id="hr_salary_rule_dopr_zap_f_dnj" model="hr.salary.rule">
        <field name="name">Doprinosi zapošljavanje 30% FBiH detašm Nj</field>
        <field name="sequence" eval="407" />
        <field name="code">D_ZAP_F_DNJ</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_ZAP_F" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_zap_dnj" />
        <field name="register_id" ref="contrib_register_zap_f" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('D_IZ_ZAP')) + float(payslip.rule_parameter('D_NA_ZAP'))
result = float(payslip.rule_parameter('BR_OSN_DNJ')) * 30/100.00
        </field>
    </record>

    <record id="hr_salary_rule_dopr_zap_k1_dnj" model="hr.salary.rule">
        <field name="name">Doprinosi zapošljavanje 70% KZE-DO detašm Nj</field>
        <field name="sequence" eval="408" />
        <field name="code">D_ZAP_K1_DNJ</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_ZAP_K" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_zap_dnj" />
        <field name="register_id" ref="contrib_register_zap_k1" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty = 0
if employee.address_id.city.lower() == 'zenica':
    result_qty = 1
result_rate = float(payslip.rule_parameter('D_IZ_ZAP')) + float(payslip.rule_parameter('D_NA_ZAP'))
result = float(payslip.rule_parameter('BR_OSN_DNJ')) * 70/100.00
        </field>
    </record>

    <record id="hr_salary_rule_dopr_zap_k2_dnj" model="hr.salary.rule">
        <field name="name">Doprinosi zapošljavanje 70% KSA detašm Nj</field>
        <field name="sequence" eval="409" />
        <field name="code">D_ZAP_K2_DNJ</field>
        <field name="appears_on_payslip" eval="False" />
        <field name="category_id" ref="l10n_bs_hr_payroll.D_ZAP_K" />
        <field name="parent_rule_id" ref="hr_salary_rule_dopr_zap" />
        <field name="register_id" ref="contrib_register_zap_k2" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_qty = 0
if employee.address_id.city.lower() == 'sarajevo':
    result_qty = 1
result_rate = float(payslip.rule_parameter('D_IZ_ZAP')) + float(payslip.rule_parameter('D_NA_ZAP'))
result = float(payslip.rule_parameter('BR_OSN_DNJ')) * 70/100.00
        </field>
    </record>

     <!-- =============== Detaširani KRAJ obračuna doprinosa ========================= -->

    <record id="hr_salary_rule_lic_odb" model="hr.salary.rule">
        <field name="name">Lični odbitak - umanjenje osnovice za porez</field>
        <field name="sequence" eval="299" />
        <field name="code">LIC_ODB</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.LIC_ODB" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = contract.koef_lo * 100
if result_rate == 0:
   result_qty = 0
result = 300.00
        </field>
    </record>

    <record id="hr_salary_rule_porez" model="hr.salary.rule">
        <field name="name">Porez = Osnov(BR_OSN - D_IZ - LIC_ODB) x Por%</field>
        <field name="sequence" eval="300" />
        <field name="code">POREZ</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.POREZ" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result_rate = float(payslip.rule_parameter('POREZ'))
osnovica = categories.BR_OSN - categories.D_IZ
lic_odb = categories.LIC_ODB
if lic_odb > osnovica:
    result = 0.00
else:
    result = osnovica - lic_odb
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_neto_pos" model="hr.salary.rule">
        <field name="name">NETO poslije poreza</field>
        <field name="sequence" eval="310" />
        <field name="code">NETO_POS</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.NETO_POS" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result = categories.NETO - categories.POREZ
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="hr_salary_rule_ukupno" model="hr.salary.rule">
        <field name="name">UKUPNO = Neto - Porez + Naknade - Obustave</field>
        <field name="sequence" eval="350" />
        <field name="code">UKUPNO</field>
        <field name="category_id" ref="l10n_bs_hr_payroll.UKUPNO" />
        <field name="register_id" ref="contrib_register_isp" />
        <field name="condition_select">none</field>
        <field name="amount_select">code</field>
        <field name="amount_python_compute">
result = categories.NETO_POS + categories.NAKN - categories.OBUST
result = round(result, int(payslip.rule_parameter('ZAOK')))
        </field>
    </record>

    <record id="structure_fbih" model="hr.payroll.structure">
        <field name="code">BASEF</field>
        <field name="name">Standardni obračun FBiH</field>
        <field
            eval="[(6, 0, [ref('hr_salary_rule_rr'), ref('hr_salary_rule_kor_min'), ref('hr_salary_rule_prerasp'), ref('hr_salary_rule_mr'), ref('hr_salary_rule_nr'), ref('hr_salary_rule_ter'),
                   ref('hr_salary_rule_dpraz'), ref('hr_salary_rule_r_dpraz'),
                   ref('hr_salary_rule_to_o'), ref('hr_salary_rule_godis'), hr_salary_rule_bolov,
                   ref('hr_salary_rule_to'), ref('hr_salary_rule_neto'), ref('hr_salary_rule_neto_pos'), ref('hr_salary_rule_bruto_osn'),
                   ref('hr_salary_rule_dopr_na'),ref('hr_salary_rule_dopr_iz'),ref('hr_salary_rule_dopr_pio'),ref('hr_salary_rule_dopr_zdr'),ref('hr_salary_rule_dopr_zap'),
                   ref('hr_salary_rule_lic_odb'),ref('hr_salary_rule_porez'),
                   ref('hr_salary_rule_ukupno')])]"
            name="rule_ids"
        />
        <field name="company_id" ref="base.main_company" />
    </record>

    <record id="structure_fbih_met" model="hr.payroll.structure">
        <field name="code">BASEF_MET</field>
        <field name="name">Standardni obračun FBiH - metalska industrija</field>
        <field
            eval="[(6, 0, [ref('hr_salary_rule_rr'), ref('hr_salary_rule_kor_min_met'), ref('hr_salary_rule_prerasp'), ref('hr_salary_rule_mr'), ref('hr_salary_rule_nr'), ref('hr_salary_rule_ter'),
                   ref('hr_salary_rule_dpraz'), ref('hr_salary_rule_r_dpraz'),
                   ref('hr_salary_rule_to_o'), ref('hr_salary_rule_godis'), hr_salary_rule_bolov,
                   ref('hr_salary_rule_to'), ref('hr_salary_rule_neto'), ref('hr_salary_rule_neto_pos'), ref('hr_salary_rule_bruto_osn'),
                   ref('hr_salary_rule_dopr_na'),ref('hr_salary_rule_dopr_iz'),ref('hr_salary_rule_dopr_pio'),ref('hr_salary_rule_dopr_zdr'),ref('hr_salary_rule_dopr_zap'),
                   ref('hr_salary_rule_lic_odb'),ref('hr_salary_rule_porez'),
                   ref('hr_salary_rule_ukupno')])]"
            name="rule_ids"
        />
        <field name="company_id" ref="base.main_company" />
    </record>


    <record id="structure_dnj" model="hr.payroll.structure">
        <field name="code">BASED_NJ</field>
        <field name="name">Detaširani radnici njemačka</field>
        <field
            eval="[(6, 0, [ref('hr_salary_rule_dopr_pio_dnj'),ref('hr_salary_rule_dopr_zdr_dnj'),ref('hr_salary_rule_dopr_zap_dnj')])]"
            name="rule_ids"
        />
        <field name="company_id" ref="base.main_company" />
    </record>

    <record id="dep_proizvodnja" model="hr.department">
        <field name="name">Proizvodnja</field>
    </record>

    <record id="job_brav_cjev_3" model="hr.job">
        <field name="name">Monter bravar cjevar III klase</field>
        <field name="department_id" ref="dep_proizvodnja"/>
        <!--
        <field name="no_of_recruitment">5</field>
        -->
        <field name="contract_type_id" ref="hr.contract_type_permanent"/>
    </record>

    <record id="job_varilac" model="hr.job">
        <field name="name">Varilac</field>
        <field name="department_id" ref="dep_proizvodnja"/>
        <!--
        <field name="no_of_recruitment">5</field>
        -->
        <field name="contract_type_id" ref="hr.contract_type_permanent"/>
    </record>

    <record id="hr_employee_bs_fbih01" model="hr.employee">
        <field name="company_id" ref="base.main_company" />
        <field name="active" eval="1" />
        <field name="name">Test radnik FBiH01</field>
        <field name="marital"></field>
        <field name="certificate"></field>
        <field name="country_id" ref="base.ba"/>
        <field name="identification_id">0301970199919</field>
        <field name="passport_id">PSBH0001</field>
        <field name="work_phone">+38761141311</field>
    </record>


    <record id="hr_employee_bs_fbih02" model="hr.employee">
        <field name="company_id" ref="base.main_company" />
        <field name="marital"></field>
        <field name="certificate"></field>
        <field name="active" eval="1" />
        <field name="country_id" ref="base.ba"/>
        <field name="name">Test radnik FBiH02</field>
        <field name="identification_id">2201977199910</field>
        <field name="passport_id">PSBH00200</field>
        <field name="work_phone">+38761477105</field>
    </record>


    <record id="hr_contract_test01" model="hr.contract">
        <field name="name">Test radnik FBiH01 METAL Contract 2020</field>
        <field name="state">open</field>
        <field name="department_id" ref="dep_proizvodnja"/>
        <field name="job_id" ref="job_varilac"/>
        <field name="date_start" eval="datetime(2020, 1, 1).date()" />
        <!--
        <field name="date_end" eval="datetime(2023, 1, 1).date()" />
        -->
        <field name="struct_id" ref="structure_fbih_met" />
        <field name="structure_type_id" ref="hr_contract.structure_type_employee" />
        <field name="employee_id" ref="hr_employee_bs_fbih01" />
        <field name="notes">Contract for Test Radnik FBiH01</field>
        <field eval="1000.00" name="wage" />
        <field eval="1.1" name="br_bod" />
        <field eval="0.60" name="koef_mr" />
        <field eval="1.5" name="koef_lo" />
    </record>

    <record id="hr_contract_test02" model="hr.contract">
        <field name="name">Test Radnik FBiH02 METAL Contract 2022/11-1</field>
        <field name="department_id" ref="dep_proizvodnja"/>
        <field name="job_id" ref="job_brav_cjev_3"/>
        <!-- draft,open,close,cancel -->
        <field name="state">open</field>
        <field name="date_start" eval="datetime(2022, 1, 1).date()" />
        <field name="date_end" eval="datetime(2022, 11, 20).date()" />
        <field name="struct_id" ref="structure_fbih_met" />
        <!--
        https://www.dfalaw.co.uk/faq_type/what-is-the-difference-between-an-employee-and-a-worker/
        -->
        <field name="structure_type_id" ref="hr_contract.structure_type_employee" />
        <field name="employee_id" ref="hr_employee_bs_fbih02" />
        <field name="notes">Contract for Test Radnik FBiH02 do 20.11.2022</field>
        <field eval="1200.00" name="wage" />
        <field eval="2.2" name="br_bod" />
        <field eval="8.00" name="koef_mr" />
        <field eval="1.5" name="koef_lo" />
    </record>

    <record id="hr_contract_test02_2" model="hr.contract">
        <field name="name">Test Radnik FBiH02 Contract 2022/11-2</field>
        <field name="department_id" ref="dep_proizvodnja"/>
        <field name="job_id" ref="job_brav_cjev_3"/>
        <!-- draft,open,close,cancel -->
        <field name="state">open</field>
        <field name="date_start" eval="datetime(2022, 11, 21).date()" />
        <field name="struct_id" ref="structure_fbih_met" />
        <!--
        https://www.dfalaw.co.uk/faq_type/what-is-the-difference-between-an-employee-and-a-worker/
        -->
        <field name="structure_type_id" ref="hr_contract.structure_type_employee" />
        <field name="employee_id" ref="hr_employee_bs_fbih02" />
        <field name="notes">Contract for Test Radnik FBiH02 od 21.11.2022</field>
        <field eval="1500.00" name="wage" />
        <field eval="1.1" name="br_bod" />
        <field eval="8.00" name="koef_mr" />
        <field eval="1.5" name="koef_lo" />
    </record>


    <!-- hernad ovo treba izbrisati! Public time off
        <record id="resource_public_time_off_1" model="resource.calendar.leaves">
            <field name="name">Public Time Off</field>
            <field name="company_id" ref="base.main_company"/>
            <field name="calendar_id" ref="resource.resource_calendar_std"/>
            <field name="date_from" eval="(datetime.today() + relativedelta(days=+8)).strftime('%Y-%m-%d 07:00:00')"></field>
            <field name="date_to" eval="(datetime.today() + relativedelta(days=+8)).strftime('%Y-%m-%d 16:00:00')"></field>
        </record>
    -->


</odoo>
